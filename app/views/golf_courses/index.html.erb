<header>
 <%= link_to "è¨ºæ–­ã‚’å§‹ã‚ã‚‹", map_index_path, class: "link" %>
    <h1>å®®åŸçœŒã®ã‚´ãƒ«ãƒ•å ´ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h1>
</header>
<main>
<div class="tab-buttons">
        <button class="tab-button active" onclick="showRanking('meimon')">åé–€ã‚³ãƒ¼ã‚¹</button>
        <button class="tab-button " onclick="showRanking('kakuyasu')">æ ¼å®‰ã‚³ãƒ¼ã‚¹</button>
        <button class="tab-button" onclick="showRanking('nando_hard')">é›£ã‚³ãƒ¼ã‚¹</button>
        <button class="tab-button" onclick="showRanking('nando_easy')">æ˜“ã‚³ãƒ¼ã‚¹</button>
    </div>
    <div class="ranking-contents">
        <div id="meimon" class="ranking-container active">
            <h2>ğŸ‘‘ åé–€ã‚³ãƒ¼ã‚¹</h2>
            <%= render 'course_table', courses: @meimon_courses %>
        </div>    
        <div id="kakuyasu" class="ranking-container">
            <h2>ğŸ’° æ ¼å®‰ã‚³ãƒ¼ã‚¹</h2>
            <%= render 'course_table', courses: @kakuyasu_courses %>
        </div>
        <div id="nando_hard" class="ranking-container">
            <h2>ğŸ‘¹ é›£ã‚³ãƒ¼ã‚¹</h2>
            <%= render 'course_table', courses: @nando_hard_courses %>
        </div>
        <div id="nando_easy" class="ranking-container">
            <h2>ğŸ˜‡ æ˜“ã‚³ãƒ¼ã‚¹ (åˆå¿ƒè€…å‘ã‘)</h2>
            <%= render 'course_table', courses: @nando_easy_courses %>
        </div>
    </div>
</main>
<footer>
    <p>&copy; 2025 å®®åŸã‚´ãƒ«ãƒ•ãƒ©ãƒ³ã‚­ãƒ³ã‚°</p>
</footer>
<script>
  // é–¢æ•°ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼ˆwindowï¼‰ã«å®šç¾©ã—ã¦ã€ã©ã“ã‹ã‚‰ã§ã‚‚å‘¼ã¹ã‚‹ã‚ˆã†ã«ã™ã‚‹
  window.showRanking = function(rankingId, element) {
    console.log("ã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ: " + rankingId); // â˜…ç¢ºèªç”¨ãƒ­ã‚°

    // 1. ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ 'active' ã‚’å¤–ã™
    const buttons = document.querySelectorAll('.tab-button');
    buttons.forEach(btn => {
      btn.classList.remove('active');
    });

    // 2. ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’éš ã™ï¼ˆ'active'ã‚’å¤–ã™ï¼‰
    const containers = document.querySelectorAll('.ranking-container');
    containers.forEach(container => {
      container.classList.remove('active');
    });

    // 3. ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’å…‰ã‚‰ã›ã‚‹ï¼ˆactiveã«ã™ã‚‹ï¼‰
    // å¼•æ•° element (this) ãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ã„ã€ãªã‘ã‚Œã° onclickã®ä¸­èº«ã‹ã‚‰æ¢ã™
    if (element) {
      element.classList.add('active');
    } else {
      // HTMLå´ã® onclick="showRanking('xxx')" ã‹ã‚‰ãƒœã‚¿ãƒ³ã‚’æ¢ã™ï¼ˆäºˆå‚™å‡¦ç†ï¼‰
      const targetBtn = document.querySelector(`button[onclick*="${rankingId}"]`);
      if (targetBtn) targetBtn.classList.add('active');
    }

    // 4. æŒ‡å®šã•ã‚ŒãŸãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¡¨ç¤ºã™ã‚‹
    const targetContainer = document.getElementById(rankingId);
    if (targetContainer) {
      targetContainer.classList.add('active');
    } else {
      console.error("IDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: " + rankingId);
    }
  };
</script>